# bspwm-specific sxhkd config, extends ~/.config/sxhkd/sxhkdrc

# https://www.reddit.com/r/bspwm/comments/6nclzv/presel_border_toolscript/

# https://www.reddit.com/r/bspwm/comments/ceu0za/help_with_sxhkdrc_config_for_multiple_monitors/
# bspc monitor -f next

super + {_,shift + }q
	bspc node --{close,kill}

super + shift + {0-9} + {_,alt}
	bspc node --to-desktop '{0-9}' { ,--follow}

super + {0-9}
	bspc desktop --focus '{0-9}'

super + {Left,Down,Up,Right}
	bspwm_focus {west,south,north,east}
super + {h,j,k,l}
	bspwm_focus {west,south,north,east}

super + shift + {Left,Down,Up,Right}
	bspwm_move {west,south,north,east}

super + ctrl + {Left,Down,Up,Right}
	{bspc node @parent/second -z left  -20 0; \
	 bspc node @parent/first  -z right -20 0, \
	 bspc node @parent/second -z top    0 +20; \
	 bspc node @parent/first  -z bottom 0 +20, \
	 bspc node @parent/first  -z bottom 0 -20; \
	 bspc node @parent/second -z top    0 -20, \
	 bspc node @parent/first  -z right +20 0; \
	 bspc node @parent/second -z left  +20 0}

# super + shift + space
# 	did="$(bspc query -D -n focused --names)"; layout="$(bsp-layout get ${did})"; test "${layout}" = "-" -o "${layout}" = "tile" && bsp-layout set tall "${did}" --master-size 0.60 || {bsp-layout remove "${did}"; bsp-layout once tile}
# super + alt + space
# 	did="$(bspc query -D -n focused --names)"; layout="$(bsp-layout get ${did})"; test "${layout}" = "-" -o "${layout}" = "tile" && bsp-layout set tall "${did}" --master-size 0.70 || {bsp-layout remove "${did}"; bsp-layout once tile}

super + shift + b
	toggleprogram "bspwm_double_borders"

# super {_,shift + }Tab
# 	bspc node --focus {next,prev}.local

super + shift + r
	bspc wm --restart

super + shift + e
	prompt "Exit bspwm?" "bspc quit"

super + @space
	bspc desktop --layout next
super {_,shift + ,ctrl + shift }f
	bspc node --state \~{fullscreen,floating,pseudo_tiled}
super + shift + m
	bspc node --state \~monocle
super + t
	bspc node --state {tiled,pseudo_tiled,floating,fullscreen}

super + alt + {1-9}
	bspc node --presel-ratio 0.{1-9}
super + alt + {Left,Down,Up,Right}
	bspc node --presel-dir {west,south,north,east}
# cancel the preselection for the current node
super + ctrl + space
	bspc node --presel-dir cancel
# cancel the preselection for the focused desktop
super + ctrl + shift + space
	bspc query -N -d | xargs -I id -n 1 bspc node id -p cancel

# move to receptacle
super + r
	bspc node $(bspc query -N -n focused) -n $(bspc query -N -n .leaf.\!window)
# Balance nodes
super + e
	bspc node @/ -B
# Insert receptacle
super + i; {Left,Down,Up,Right}
	bspc node --presel-dir {west,south,north,east} -i
# Close all receptacles
super + shift + i
	for win in `bspc query -N -n .leaf.\!window`; do bspc node $win -k; done;

super + n
	bspwm_scratchpad "scratchpad" "alacritty --class scratchpad --title scratchpad --option font.size=14 --command tmux new-session -A -s scratchpad" "1600x1000+0+0"
super + m
	bspwm_scratchpad "math" "alacritty --class math --title math --option font.size=18 --command tmux new-session -A -s math xonsh" "1200x800+0+0"

## Split vertical, horizontal, or cancel
#super + {n,e,s,w,r}
#        bspc node -p {north, east, south, west, cancel}

# Change focus or move container
#super + alt + {Left,Right}
#	desk=`bspc query -D -d focused`; \
#	bspc desktop -m {prev,next}; \
#	bspc monitor -f {prev,next}; \
#	bspc desktop -f $desk

#bspc node -s biggest.local
#bspc desktop -f {prev.occupied,next.occupied} 
#bspc window -t locked 
#bspc window -f {next.floating,next.tiled}

## Change desktop padding
#alt + {_, shift} + bracketright
#	bspc config -d focused right_padding $((`bspc config -d focused right_padding` {+,-} 20 ))

#alt + {_, shift} + bracketleft
#	bspc config -d focused left_padding $((`bspc config -d focused left_padding` {+,-} 20 ))

#ctrl + {_, shift} + bracketright
#	bspc config -d focused bottom_padding $((`bspc config -d focused bottom_padding` {+,-} 20 ))

#ctrl + {_, shift} + bracketleft
#	bspc config -d focused top_padding $((`bspc config -d focused top_padding` {+,-} 20 ))

#alt + shift + {minus,equal}
#	bspc config -d focused right_padding $((`bspc config -d focused right_padding` {+,-} 20 )); \
#	bspc config -d focused left_padding $((`bspc config -d focused left_padding` {+,-} 20 )); \
#	bspc config -d focused bottom_padding $((`bspc config -d focused bottom_padding` {+,-} 20 )); \
#	bspc config -d focused top_padding $((`bspc config -d focused top_padding` {+,-} 20 ));

## Change window gap
#alt + {minus,equal}
#	bspc config -d focused window_gap $((`bspc config -d focused window_gap` {+,-} 2 ))

## Presel window for splitting
#alt + ctrl + {h,j,k,l}
#	bspc window -p {left,down,up,right}
#
## Move window into presel position
#alt + shift {a,s,d,f}
#	bspc window -w {left.manual,down.manual,up.manual,right.manual}

#super + {t,shift + t,s,f}
#	bspc node -t '~{tiled,pseudo_tiled,floating,fullscreen}'

# swap the current node and the biggest node
#super + g
#	bspc node -s biggest

# set the window state
#super + {t,shift + t,s,f}
#	bspc node -t {tiled,pseudo_tiled,floating,fullscreen}

# set the node flags
#super + ctrl + {m,x,y,z}
#	bspc node -g {marked,locked,sticky,private}

# focus the node for the given path jump
#super + {p,b,comma,period}
#	bspc node -f @{parent,brother,first,second}

# focus the next/previous node in the current desktop
#super + {_,shift + }c
#	bspc node -f {next,prev}.local

# focus the next/previous desktop in the current monitor
#super + bracket{Left,Right}
#	bspc desktop -f {prev,next}.local

# focus the last node/desktop
#super + {grave,Tab}
#	bspc {node,desktop} -f last

# focus the older or newer node in the focus history
#super + {o,i}
#	bspc wm -h off; \
#	bspc node {older,newer} -f; \
#	bspc wm -h on
