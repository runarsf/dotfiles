#!/bin/sh
echo "$(basename "$0") @ $(date +%T.%N)" >> /home/drift/bootorder
bspc rule -r "*"

mainmonitor="$(bspc query --monitors --names | grep -v LVDS | head -n 1)"
if ! echo "$mainmonitor" | grep LVDS >/dev/null 2>&1; then
  xrandr --output "$mainmonitor" --auto --output LVDS1 --off
fi

bspc monitor $mainmonitor -d 1 2 3 4 5 6 7 8 9 10
bspc desktop -f 1

bspc config border_width 3
bspc config window_gap 15
bspc config top_padding 24 # top_padding I set equal to polybar's height
bspc config focus_follows_pointer true

bspc config split_ratio          0.52
bspc config borderless_monocle   true
bspc config gapless_monocle      true

#dropdownname="dropdown"
#bspc query -N -n .hidden >/dev/null || setsid $TERMINAL -n "$dropdownname" -e dropdown >/dev/null 2>&1 &
#bspc rule -a St:$dropdownname hidden=on
#bspc rule -a St:$dropdownname sticky=on
#bspc rule -a St:$dropdownname state=floating

#bspc config external_rules_command "$(which floaters)"

bspc rule -a discord desktop=^2

exec_once() {
  if test -z "${BSPWM_HASRUN}"; then
    "${@}"
  fi
}

exec_once discord

export BSPWM_HASRUN=true
