# Basic Settings
set preview false
#set previewer ~/dotfiles/bin/lf/previewer
set previewer pistol
set hidden true
set color256 true
set drawbox true
set icons true
set ignorecase true

# Custom Functions
cmd open ${{
    case $(file --mime-type "${f}" -bL) in
        text/*|application/json) ${EDITOR} "${f}";;
        video/*|image/*/application/pdf) xdg-open "${f}" & disown;;
        *) xdg-open "${f}" ;;
    esac
}}

cmd mkdir ${{
  printf "Directory Name: "
  read dir
  mkdir "${dir}"
}}

cmd mkfile ${{
  printf "File Name: "
  read file
  touch "${file}"
  #${EDITOR} "${file}"
}}

cmd chmod ${{
  printf "Mode Bits: "
  read bits

  for file in "${fx}"; do
    chmod "${bits}" "${file}"
  done
}}

cmd sudomkfile ${{
  printf "File Name: "
  read file
  sudo touch "${file}"
  #sudo $EDITOR $ans
}}

cmd setbg %cp "${f}" ~/.config/wall.png && feh --bg-scale "${f}"

#cmd dragon %dragon-drag-and-drop -a -x $fx
#cmd cpdragon %cpdragon
#cmd mvdragon %mvdragon
#cmd dlfile %dlfile

# Archive bindings
cmd unarchive ${{
  case "${f}" in
      *.zip) unzip "${f}";;
      *.tar.gz) tar -xzvf "${f}";;
      *.tar.bz2) tar -xjvf "${f}";;
      *.tar) tar -xvf "${f}";;
      *) printf "Unsupported format\n";;
  esac
}}

cmd zip %zip -r "${f}" "${f}"
cmd tar %tar cvf "${f}.tar" "${f}"
cmd targz %tar cvzf "${f}.tar.gz" "${f}"
cmd tarbz2 %tar cjvf "${f}.tar.bz2" "${f}"

# Trash cli bindings
#cmd trash ${{
#  files=$(echo "$fx" | sed "s/ /\\\ /g;s/\[/\\\[/g;s/\]/\\\]/g")
#  IFS=$'\n'
#  for file in $files
#  do
#    trash-put "$(basename "$file")"
#  done
#}}

#cmd clear_trash %trash-empty

#cmd restore_trash ${{
#  trash-restore
#}}

#cmd stripspace %stripspace "$f"

# Bindings
# Remove some defaults
map m
map o
map n
map "'"
map '"'
map d
map c
map e
map f

# File Openers
map e $${EDITOR} "${f}"
#map es $sudo $EDITOR "$f"
map u $view "$f"

# Archive Mappings
map az zip
map at tar
map ag targz
map ab targz
map au unarchive

# Trash Mappings
#map dd trash
#map tc clear_trash
#map tr restore_trash

# Broot Mapping
#map f broot_jump

# Dragon Mapping
#map dr dragon
#map dm mvdragon
#map dc cpdragon
#map dl dlfile

#map ss stripspace

# Basic Functions
map sh set hidden!
map DD delete
map p paste
map x cut
map y copy
map <enter> open
map mf mkfile
#map mr sudomkfile
map md mkdir
#map ms $mkscript
map ch chmod
map bg setbg
#map o open_config
map r rename
map H top
map L bottom
map R reload
#map C clear
#map U unselect

map gg cd ~

map gp cd ~/Pictures
map gdc cd ~/Documents
map gdf cd ~/dotfiles
map gdl cd ~/Downloads

map gc cd ~/.config
map gE cd /etc
map gU. cd /usr
map gUs cd /usr/share
