clear
echo Team Fortress 2
echo ------------------------------
echo tf2e loading
echo -


// Team Fortress 2 autoexec.cfg
	bind "kp_multiply" "exec autoexec"

// smoother network settings (lower these if your internet is bad)
	echo "loading network settings"
	fps_max 300
	rate 97000
	cl_cmdrate 66
	cl_updaterate 66
	cl_interp 0.0325
	cl_interp_npcs 0.1
	cl_interp_ratio 1
	sv_allowdownload 1
	sv_allowupload 1
	net_queued_packet_thread 1
	net_compresspackets 0
	net_splitrate 2
	cl_pred_optimize 1
	cl_lagcompensation 1
	cl_predictweapons 1
	cl_smooth 1
	cl_smoothtime 0.7
	tf_party_force_update

// Filesystem commands - loads the game faster
	filesystem_buffer_size 262144 // Use a 256KB buffer for the filesystem
	filesystem_max_stdio_read 64 // Use a higher max read cap (64MB)
	filesystem_native 1 // Use native filesystem calls if available
	filesystem_unbuffered_io 1 // Allow unbuffered IO where appropriate since it can be async
	
// Gameplay
	viewmodel_fov 70
	fov_desired 90
	viewmodel_fov_demo 70
	demo_fov_override 90
	glow_outline_effect_enable 1
	hud_fastswitch 1
	cl_autoreload 1
	sv_lan 0 //changed to 1 in order to prevent people joining private matches unexpectedly
	tf_mvm_min_players_to_start 1
	cl_mvm_wave_status_visible_during_wave 1
	cl_use_tournament_specgui 1
	hud_combattext 1
	hud_combattext_batching 1
	hud_combattext_batching_window 2
	hud_combattext_doesnt_block_overhead_text 1
	tf_medigun_autoheal 1
	hud_medichealtargetmarker 1
	hud_medicautocallers 1
	hud_medicautocallersthreshold "60"
	alias "tf2e_medic_0" "print This TF2E feature is no longer present. Please remove tf2e_medic_0 from your config."
	tf_hud_target_id_disable_floating_health 1
	tf_dingalingaling 1
	tf_dingalingaling_lasthit 1
	tf_dingaling_pitchmaxdmg 5
	tf_dingaling_pitchmindmg 195
	tf_scoreboard_mouse_mode 2
	engine_no_focus_sleep 0
	cl_showfps 0
	sv_allow_point_servercommand always

// disable mouse acceleration (allows you to aim efficiently, very beneficial)
	m_customaccel 0
	m_mouseaccel1 0
	m_mouseaccel2 0
	m_rawinput 1
	
// disable the game urging you to play tutorials
	cl_ask_blacklist_opt_out "1"
	cl_ask_favorite_opt_out "1"
	sb_dontshow_maxplayer_warning "1"
	tf_explanations_backpackpanel "1"
	tf_explanations_charinfo_armory_panel "1"
	tf_explanations_charinfopanel "1"
	tf_explanations_craftingpanel "1"
	tf_explanations_discardpanel "1"
	tf_explanations_store "1"
	tf_training_has_prompted_for_forums "1"
	tf_training_has_prompted_for_loadout "1"
	tf_training_has_prompted_for_offline_practice "1"
	tf_training_has_prompted_for_options "1"
	tf_training_has_prompted_for_training "1"
	cl_showhelp 0
	tf_taunt_always_show_hint 0
	sb_dontshow_maxplayer_warning 1
	tf_coach_request_nevershowagain 1
	tf_show_maps_details_explanation_count 0
	tf_show_taunt_explanation_in_class_loadout 0
	tf_show_preset_explanation_in_class_loadout 0
	cl_hud_playerclass_playermodel_showed_confirm_dialog 1
	tf_find_a_match_hint_viewed 1
	tf_quest_map_intro_viewed 1
	tf_warpaint_explanation_viewed 1
	
// block commands that render the game unplayable (this protects you from shitty servers)
	echo loading useful tf2e stuff
	alias unbindall "echo TF2E BLOCKED an attempted unbindall"
	alias closed_htmlpage "echo TF2E BLOCKED an attempted wait timer"
	
// enable dev console without needing to go into advanced keyboard options
	con_enable 1
	toggleconsole
	toggleconsole
	
// switch the action key (grappling hook, weapon pickup, etc) to r (while keeping reload)
	bind r +action
	alias +action "+reload ; +use_action_slot_item"
	alias -action "-reload ; -use_action_slot_item"
	bind h +reload
	
// General keybinds
	bind "mwheelup" "+jump"
	bind "mwheeldown" "+jump"
	bind "h" "impulse 201"
	bind "space" "+jump"
	bind "F1" "v_yes"
	bind "F2" "v_no"
	bind "F3" "voicemenu 1 4"
	bind "F4" "voicemenu 1 1"
	bind "F7" "retry"
	bindtoggle f8 "r_drawviewmodel" // press f8 to toggle viewmodels on and off
	//bindtoggle "F8" "voice_enable" 1 0
	//bindtoggle "F9" "cl_first_person_uses_world_model" 0 1
	//bindtoggle "F10" "crosshair" 1 0
	bindtoggle "F11" "cl_software_cursor" 0 1

// Graphics
	r_lod 0
	//mat_picmip -1 ; Included in goodgpu.cfg
	cl_new_impact_effects 1
	//r_rimlight 0
	mat_dxlevel 90
	mat_phong 0
	mat_vsync 0

// No Movement script
	bind w +mfwd
	bind s +mback
	bind a +mleft
	bind d +mright
	alias +mfwd "-back;+forward;alias checkfwd +forward"
	alias +mback "-forward;+back;alias checkback +back"
	alias +mleft "-moveright;+moveleft;alias checkleft +moveleft"
	alias +mright "-moveleft;+moveright;alias checkright +moveright"
	alias -mfwd "-forward;checkback;alias checkfwd none"
	alias -mback "-back;checkfwd;alias checkback none"
	alias -mleft "-moveleft;checkright;alias checkleft none"
	alias -mright "-moveright;checkleft;alias checkright none"
	alias checkfwd none
	alias checkback none
	alias checkleft none
	alias checkright none
	alias none ""
	
// Jump crouch script
	alias +crouchjump "+jump; +duck"
	alias -crouchjump "-duck; -jump"
	//bind "space" "+crouchjump"
	
// Crosshair
	cl_crosshair_blue 125;
	cl_crosshair_red 0;
	cl_crosshair_green 255
	cl_crosshair_scale 41
	//cl_crosshair_file custom_29
	
// Alias
		//Quick Connect
			alias "q1" "connect 193.192.59.191:27185; echo CONNECTING TO PANDA"
			alias "q2" "connect 72.5.195.50:27016; echo CONNECTING TO LUIGI MARIOKART"
			alias "q3" "connect 162.248.88.136:27015; echo CONNECTING TO LUIGI MEM"

		// Kys
			alias "kys" "explode";
			bind "o" "kys"

		// Drop + Inventory
			alias "drop" "cl_trigger_first_notification";
			alias "inventory" "open_charinfo_backpack";
			setinfo inventory "";
			setinfo drop "";

		// Bugfix
			alias "fixbugs" "record demo ; stop ; snd_restart ; hud_reloadscheme"
			//bind "F7" "hud_reloadscheme"
			//bind "F8" "fixbugs"

		// Spinbot
			bind "k" "+spinbot"
			alias +spinbot "cl_yawspeed 500; +left"
			alias -spinbot "cl_yawspeed 200; -left"

		// Show netgraph while checking scoreboard
			net_graph "1"
			net_graphheight "9999"
			alias "+scorenet" "+showscores; net_graphheight 0"
			alias "-scorenet" "-showscores; net_graphheight 9999"
			bind "TAB" "+scorenet"
			
		// Scroll bhop
			bind "MOUSE3" "+autobhop"
			alias "-autobhop" "bind MWHEELDOWN invnext; bind MWHEELUP invprev; bind MOUSE3 +autobhop"
			alias "+autobhop" "bind MWHEELDOWN +jump; bind MWHEELUP +jump; bind MOUSE3 -autobhop"
			alias "bhopswitchdisable" "bind MOUSE3 +attack3; bind MWHEELDOWN invnext; bind MWHEELUP invprev"

		// Alias rcat, rquote
			alias "rcat" "exec randomcat"
			alias "rquote" "exec randomquote"
			
// Lenny binds
	unbind "kp_end"
	unbind "kp_downarrow"
	unbind "kp_pgdn"
	unbind "kp_leftarrow"
	unbind "kp_5"
	unbind "kp_rightarrow"
	unbind "kp_home"
	unbind "kp_uparrow"
	unbind "kp_pgup"

	alias "kp1" "say ( ͡° ͜ʖ ͡°)"
	alias "kp2" "say ( ͡~ ͜ʖ ͡°)"
	alias "kp3" "say ᕕ( ͡° ͜ʖ ͡° )ᕗ"
	alias "kp4" "say ( ͠° ͟ʖ ͡°)"
	alias "kp5" "say ( ͡ᵔ ͜ʖ ͡ᵔ )"
	alias "kp6" "say ಠ_ಠ"
	alias "kp7" "say (>_<)"
	alias "kp8" "say ¯\_(ツ)_/¯"
	alias "kp9" "say (╯°□°）╯︵ ┻━┻"

	bind "kp_end" "kp1"
	bind "kp_downarrow" "kp2"
	bind "kp_pgdn" "kp3"
	bind "kp_leftarrow" "kp4"
	bind "kp_5" "kp5"
	bind "kp_rightarrow" "kp6"
	bind "kp_home" "kp7"
	bind "kp_uparrow" "kp8"
	bind "kp_pgup" "kp9"

// Filter console text(error) messages
	con_filter_enable 1
	con_filter_text_out "particle"
	con_filter_text_out "material"
	con_filter_text_out "muzzle"
	con_filter_text_out "Cannot update control point"
	con_filter_text_out "GC told us to expect"
	con_filter_text_out "Starting ping measurement"
	con_filter_text_out "Ping measurement completed"
	con_filter_text_out "doesn't have attachment"
	con_filter_text_out "Config file cfg/config.cfg is read-only!!"
	con_filter_text_out "BlockingGetDataPointer:"
	con_filter_text_out "Error: "
	con_filter_text_out "No such variable"
	con_filter_text_out "Unknown command: "
	con_filter_text_out "Attempting to create unknown particle system"

// optimization settings
// most of these courtesy of comanglia and mastercoms
/*
	echo loading optimization settings
	r_queued_decals 0 
	r_threaded_particles 1
	r_threaded_renderables 1
	net_queue_trace 0
	studio_queue_mode 1
	cl_threaded_client_leaf_system 0
	r_threaded_renderables 1
	r_threaded_particles 1
	r_queued_ropes 1
	r_queued_post_processing 1
	r_threaded_client_shadow_manager 1
	snd_mix_async 1
	snd_async_fullyasync 1
	cl_new_impact_effects 0
	mat_alphacoverage 0
	rope_averagelight 0
	hud_achievement_glowtime 0
	r_decals 50
	mp_decals 50
	r_maxmodeldecal 9
	r_queued_post_processing 0
	sys_minidumpspewlines 500
	studio_queue_mode 1
	mat_queue_mode 2
	r_entityclips 1
	r_frustumcullworld 1
	r_worldlistcache 1
	r_occludermincount 1
	tf_hud_target_id_show_avatars 0
	tf_time_loading_item_panels 0.0001
	tf_backpack_page_button_delay 0.25
	lzma_persistent_buffer 1
	filesystem_buffer_size 262144
	filesystem_max_stdio_read 256
	filesystem_native 1
	filesystem_unbuffered_io 1
	mod_load_anims_async 1
	mod_load_mesh_async 1
	mod_load_vcollide_async 1
	mod_touchalldata 0
	mod_forcedata 0
	mod_forcetouchdata 1
	snd_async_fullyasync 1
	snd_cull_duplicates 0
	voice_steal 2
	snd_noextraupdate 1
	snd_defer_trace 1
	phonemefilter 0.1
	phonemesnap 63
	phonemedelay 0
	in_usekeyboardsampletime 1
	r_particle_sim_spike_threshold_ms 0
*/
	
// Prism Settings (for refract)
	mat_motion_blur_enabled 1 			//afaik the only sure-fire way to keep refract masking on
	mat_motion_blur_strength 0 			//effectively disables motion blur, personal choice + motion blur gets masked and looks bad with refract masking
	mat_disable_bloom 1 				//disables bloom so refract masking doesn't create a dark rectangle over light materials
	mat_hdr_level 0
	mat_colcorrection_disableentities 1
	mat_colorcorrection 0

// Executes the script "voicealias"
	exec voicealias.cfg
	exec goodgpu.cfg
	exec igpu.cfg
	
	map_background preload_room; wait 10; disconnect
	
// Host writeconfig
	host_writeconfig
