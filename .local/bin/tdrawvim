#!/usr/bin/env bash
require () {
  if ! command -v "${1}" >/dev/null 2>&1; then
    printf "${1} not found"
    if test -n "${2}"; then
      printf "  ${2}"
    fi
    exit 1
  fi
}
require "tdraw" "go get -u github.com/aca/tdraw"
require "xclip"

# Create a new temporary file
tmpfile="$(mktemp /tmp/tdraw.XXXXXX)"
# Could also use 3<> to open for reading and writing on the same descriptor
exec 3> "${tmpfile}" # Open for reading
exec 4< "${tmpfile}" # Open for writing

rm "${tmpfile}"

# Write the output of `tdraw` to the file descriptor 3
>&3 tdraw
# Read the contents of file descriptor 4 and copy it to the clipboard
cat <&4 | xclip -selection c
